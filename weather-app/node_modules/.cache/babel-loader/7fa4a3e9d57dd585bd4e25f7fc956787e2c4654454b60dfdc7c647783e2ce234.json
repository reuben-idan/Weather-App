{"ast":null,"code":"import React,{useState}from\"react\";import SearchBar from\"./components/SearchBar\";import WeatherCard from\"./components/WeatherCard\";import MultiCityWeather from\"./components/MultiCityWeather\";import FiveDayForecast from\"./components/FiveDayForecast\";import{getCoordinates,getWeather}from\"./components/WeatherDisplay\";import\"./styles/App.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[weather,setWeather]=useState(null);const[coords,setCoords]=useState(null);const[error,setError]=useState(\"\");const[loading,setLoading]=useState(false);const handleSearch=async city=>{setError(\"\");setWeather(null);setCoords(null);setLoading(true);try{const{latitude,longitude}=await getCoordinates(city);setCoords({latitude,longitude});// Fetch all weather variables from your backend\nconst response=await fetch(\"/weather\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({city})});// Correction: Check if response is JSON before parsing\nconst contentType=response.headers.get(\"content-type\");if(!contentType||!contentType.includes(\"application/json\")){const text=await response.text();throw new Error(\"Server error: \"+text);}const data=await response.json();if(response.ok){setWeather(data);}else{setError(data.error||\"An error occurred.\");}}catch(err){setError(err.message||\"An error occurred.\");}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"app-bg\",children:[/*#__PURE__*/_jsxs(\"main\",{className:\"main-content\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"app-title\",children:\"Weatherly\"}),/*#__PURE__*/_jsx(\"p\",{className:\"subtitle\",children:\"Effortless, beautiful weather at a glance\"})]}),/*#__PURE__*/_jsx(\"section\",{className:\"search-section\",children:/*#__PURE__*/_jsx(SearchBar,{onSearch:handleSearch})}),/*#__PURE__*/_jsxs(\"section\",{className:\"single-weather-section\",children:[loading&&/*#__PURE__*/_jsx(\"div\",{className:\"loader\"}),weather&&!loading&&/*#__PURE__*/_jsx(WeatherCard,{weather:weather}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-msg\",children:error})]}),coords&&/*#__PURE__*/_jsx(\"section\",{className:\"forecast-section\",children:/*#__PURE__*/_jsx(FiveDayForecast,{lat:coords.latitude,lon:coords.longitude})}),/*#__PURE__*/_jsx(\"section\",{className:\"multi-city-section\",children:/*#__PURE__*/_jsx(MultiCityWeather,{})})]}),/*#__PURE__*/_jsx(\"footer\",{className:\"footer\",children:/*#__PURE__*/_jsxs(\"span\",{children:[\"Powered by\",\" \",/*#__PURE__*/_jsx(\"a\",{href:\"https://open-meteo.com/\",target:\"_blank\",rel:\"noopener noreferrer\",children:\"Open-Meteo\"})]})})]});}export default App;","map":{"version":3,"names":["React","useState","SearchBar","WeatherCard","MultiCityWeather","FiveDayForecast","getCoordinates","getWeather","jsx","_jsx","jsxs","_jsxs","App","weather","setWeather","coords","setCoords","error","setError","loading","setLoading","handleSearch","city","latitude","longitude","response","fetch","method","headers","body","JSON","stringify","contentType","get","includes","text","Error","data","json","ok","err","message","className","children","onSearch","lat","lon","href","target","rel"],"sources":["C:/Users/IDAN/Weather App/weather-app/src/App.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport SearchBar from \"./components/SearchBar\";\nimport WeatherCard from \"./components/WeatherCard\";\nimport MultiCityWeather from \"./components/MultiCityWeather\";\nimport FiveDayForecast from \"./components/FiveDayForecast\";\nimport { getCoordinates, getWeather } from \"./components/WeatherDisplay\";\nimport \"./styles/App.css\";\n\nfunction App() {\n  const [weather, setWeather] = useState(null);\n  const [coords, setCoords] = useState(null);\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const handleSearch = async (city) => {\n    setError(\"\");\n    setWeather(null);\n    setCoords(null);\n    setLoading(true);\n\n    try {\n      const { latitude, longitude } = await getCoordinates(city);\n      setCoords({ latitude, longitude });\n      // Fetch all weather variables from your backend\n      const response = await fetch(\"/weather\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ city }),\n      });\n\n      // Correction: Check if response is JSON before parsing\n      const contentType = response.headers.get(\"content-type\");\n      if (!contentType || !contentType.includes(\"application/json\")) {\n        const text = await response.text();\n        throw new Error(\"Server error: \" + text);\n      }\n\n      const data = await response.json();\n      if (response.ok) {\n        setWeather(data);\n      } else {\n        setError(data.error || \"An error occurred.\");\n      }\n    } catch (err) {\n      setError(err.message || \"An error occurred.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"app-bg\">\n      <main className=\"main-content\">\n        <header className=\"header\">\n          <h1 className=\"app-title\">Weatherly</h1>\n          <p className=\"subtitle\">Effortless, beautiful weather at a glance</p>\n        </header>\n        <section className=\"search-section\">\n          <SearchBar onSearch={handleSearch} />\n        </section>\n        <section className=\"single-weather-section\">\n          {loading && <div className=\"loader\"></div>}\n          {weather && !loading && <WeatherCard weather={weather} />}\n          {error && <div className=\"error-msg\">{error}</div>}\n        </section>\n        {coords && (\n          <section className=\"forecast-section\">\n            <FiveDayForecast lat={coords.latitude} lon={coords.longitude} />\n          </section>\n        )}\n        <section className=\"multi-city-section\">\n          <MultiCityWeather />\n        </section>\n      </main>\n      <footer className=\"footer\">\n        <span>\n          Powered by{\" \"}\n          <a href=\"https://open-meteo.com/\" target=\"_blank\" rel=\"noopener noreferrer\">\n            Open-Meteo\n          </a>\n        </span>\n      </footer>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}