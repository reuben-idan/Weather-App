{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{getCoordinates,getWeather}from\"./WeatherDisplay\";import{fetchWeatherWithCache}from\"../utils/weatherCache\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function MultiCityWeather(){const[cities,setCities]=useState([\"London\",\"Paris\"]);const[input,setInput]=useState(\"\");const[weatherData,setWeatherData]=useState({});const[loading,setLoading]=useState(false);const handleAddCity=e=>{e.preventDefault();const city=input.trim();if(city&&!cities.includes(city)){setCities([...cities,city]);}setInput(\"\");};useEffect(()=>{async function fetchAll(){setLoading(true);const results={};for(const city of cities){try{const coords=await fetchWeatherWithCache(\"coords_\".concat(city),()=>getCoordinates(city));const temp=await fetchWeatherWithCache(\"weather_\".concat(city),()=>getWeather(coords.latitude,coords.longitude));results[city]={temp,coords};}catch(_unused){results[city]={temp:\"N/A\"};}}setWeatherData(results);setLoading(false);}fetchAll();// eslint-disable-next-line\n},[cities.join(\",\")]);return/*#__PURE__*/_jsxs(\"div\",{className:\"multi-city-container\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAddCity,style:{marginBottom:16},children:[/*#__PURE__*/_jsx(\"input\",{value:input,onChange:e=>setInput(e.target.value),placeholder:\"Add city\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Add\"})]}),loading&&/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}),/*#__PURE__*/_jsx(\"div\",{className:\"multi-city-list\",children:cities.map(city=>{var _weatherData$city;return/*#__PURE__*/_jsxs(\"div\",{className:\"multi-city-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"city-name\",children:city}),/*#__PURE__*/_jsx(\"div\",{className:\"city-temp\",children:((_weatherData$city=weatherData[city])===null||_weatherData$city===void 0?void 0:_weatherData$city.temp)!==undefined?\"\".concat(weatherData[city].temp,\"\\xB0C\"):\"…\"})]},city);})})]});}","map":{"version":3,"names":["React","useState","useEffect","getCoordinates","getWeather","fetchWeatherWithCache","jsx","_jsx","jsxs","_jsxs","MultiCityWeather","cities","setCities","input","setInput","weatherData","setWeatherData","loading","setLoading","handleAddCity","e","preventDefault","city","trim","includes","fetchAll","results","coords","concat","temp","latitude","longitude","_unused","join","className","children","onSubmit","style","marginBottom","value","onChange","target","placeholder","type","map","_weatherData$city","undefined"],"sources":["C:/Users/IDAN/Weather App/weather-app/src/components/MultiCityWeather.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { getCoordinates, getWeather } from \"./WeatherDisplay\";\r\nimport { fetchWeatherWithCache } from \"../utils/weatherCache\";\r\n\r\nexport default function MultiCityWeather() {\r\n  const [cities, setCities] = useState([\"London\", \"Paris\"]);\r\n  const [input, setInput] = useState(\"\");\r\n  const [weatherData, setWeatherData] = useState({});\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleAddCity = (e) => {\r\n    e.preventDefault();\r\n    const city = input.trim();\r\n    if (city && !cities.includes(city)) {\r\n      setCities([...cities, city]);\r\n    }\r\n    setInput(\"\");\r\n  };\r\n\r\n  useEffect(() => {\r\n    async function fetchAll() {\r\n      setLoading(true);\r\n      const results = {};\r\n      for (const city of cities) {\r\n        try {\r\n          const coords = await fetchWeatherWithCache(\r\n            `coords_${city}`,\r\n            () => getCoordinates(city)\r\n          );\r\n          const temp = await fetchWeatherWithCache(\r\n            `weather_${city}`,\r\n            () => getWeather(coords.latitude, coords.longitude)\r\n          );\r\n          results[city] = { temp, coords };\r\n        } catch {\r\n          results[city] = { temp: \"N/A\" };\r\n        }\r\n      }\r\n      setWeatherData(results);\r\n      setLoading(false);\r\n    }\r\n    fetchAll();\r\n    // eslint-disable-next-line\r\n  }, [cities.join(\",\")]);\r\n\r\n  return (\r\n    <div className=\"multi-city-container\">\r\n      <form onSubmit={handleAddCity} style={{ marginBottom: 16 }}>\r\n        <input\r\n          value={input}\r\n          onChange={e => setInput(e.target.value)}\r\n          placeholder=\"Add city\"\r\n        />\r\n        <button type=\"submit\">Add</button>\r\n      </form>\r\n      {loading && <div>Loading...</div>}\r\n      <div className=\"multi-city-list\">\r\n        {cities.map(city => (\r\n          <div className=\"multi-city-card\" key={city}>\r\n            <div className=\"city-name\">{city}</div>\r\n            <div className=\"city-temp\">\r\n              {weatherData[city]?.temp !== undefined\r\n                ? `${weatherData[city].temp}°C`\r\n                : \"…\"}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}