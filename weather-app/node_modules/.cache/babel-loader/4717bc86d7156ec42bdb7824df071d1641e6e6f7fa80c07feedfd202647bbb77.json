{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{fetchWeatherWithCache}from\"../utils/weatherCache\";import\"./FiveDayForecast.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";async function get5DayForecast(lat,lon){return fetchWeatherWithCache(\"forecast_\".concat(lat,\"_\").concat(lon),async()=>{const res=await fetch(\"https://api.open-meteo.com/v1/forecast?latitude=\".concat(lat,\"&longitude=\").concat(lon,\"&daily=temperature_2m_max,temperature_2m_min,weathercode&timezone=auto\"));const data=await res.json();return data.daily;});}// Function to get weather icon based on weather code\nconst getWeatherIcon=weatherCode=>{if(weatherCode>=0&&weatherCode<=3)return\"☀️\";// Clear sky\nif(weatherCode>=45&&weatherCode<=48)return\"🌫️\";// Foggy\nif(weatherCode>=51&&weatherCode<=55)return\"🌧️\";// Drizzle\nif(weatherCode>=56&&weatherCode<=57)return\"🌨️\";// Freezing drizzle\nif(weatherCode>=61&&weatherCode<=65)return\"🌧️\";// Rain\nif(weatherCode>=66&&weatherCode<=67)return\"🌨️\";// Freezing rain\nif(weatherCode>=71&&weatherCode<=75)return\"❄️\";// Snow\nif(weatherCode>=77&&weatherCode<=77)return\"🌨️\";// Snow grains\nif(weatherCode>=80&&weatherCode<=82)return\"🌧️\";// Rain showers\nif(weatherCode>=85&&weatherCode<=86)return\"🌨️\";// Snow showers\nif(weatherCode>=95&&weatherCode<=95)return\"⛈️\";// Thunderstorm\nif(weatherCode>=96&&weatherCode<=99)return\"⛈️\";// Thunderstorm with hail\nreturn\"🌤️\";// Default\n};// Function to format date\nconst formatDate=dateString=>{const date=new Date(dateString);const today=new Date();const tomorrow=new Date(today);tomorrow.setDate(tomorrow.getDate()+1);if(date.toDateString()===today.toDateString()){return\"Today\";}else if(date.toDateString()===tomorrow.toDateString()){return\"Tomorrow\";}else{return date.toLocaleDateString(\"en-US\",{weekday:\"short\"});}};export default function FiveDayForecast(_ref){let{lat,lon}=_ref;const[forecast,setForecast]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{if(lat&&lon){setLoading(true);get5DayForecast(lat,lon).then(setForecast).finally(()=>setLoading(false));}},[lat,lon]);if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"forecast-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"forecast-header\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"forecast-title\",children:\"5-Day Forecast\"}),/*#__PURE__*/_jsx(\"div\",{className:\"forecast-subtitle\",children:\"Loading forecast data...\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"forecast-loading\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"})})]});}if(!forecast){return/*#__PURE__*/_jsx(\"div\",{className:\"forecast-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"forecast-header\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"forecast-title\",children:\"5-Day Forecast\"}),/*#__PURE__*/_jsx(\"div\",{className:\"forecast-subtitle\",children:\"Unable to load forecast\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"forecast-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"forecast-header\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"forecast-title\",children:\"5-Day Forecast\"}),/*#__PURE__*/_jsx(\"div\",{className:\"forecast-subtitle\",children:\"Extended weather outlook\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"forecast-grid\",children:forecast.time.slice(0,5).map((date,idx)=>{const weatherIcon=getWeatherIcon(forecast.weathercode[idx]);const formattedDate=formatDate(date);const minTemp=Math.round(forecast.temperature_2m_min[idx]);const maxTemp=Math.round(forecast.temperature_2m_max[idx]);return/*#__PURE__*/_jsxs(\"div\",{className:\"forecast-day-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"forecast-day-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"forecast-day-name\",children:formattedDate}),/*#__PURE__*/_jsx(\"div\",{className:\"forecast-day-icon\",children:weatherIcon})]}),/*#__PURE__*/_jsx(\"div\",{className:\"forecast-day-temps\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"temp-range\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"temp-max\",children:[maxTemp,\"\\xB0\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"temp-separator\",children:\"/\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"temp-min\",children:[minTemp,\"\\xB0\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"forecast-day-details\",children:/*#__PURE__*/_jsx(\"div\",{className:\"temp-bar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"temp-fill\",style:{left:\"\".concat((minTemp+20)/60*100,\"%\"),width:\"\".concat((maxTemp-minTemp)/60*100,\"%\")}})})})]},date);})})]});}","map":{"version":3,"names":["React","useEffect","useState","fetchWeatherWithCache","jsx","_jsx","jsxs","_jsxs","get5DayForecast","lat","lon","concat","res","fetch","data","json","daily","getWeatherIcon","weatherCode","formatDate","dateString","date","Date","today","tomorrow","setDate","getDate","toDateString","toLocaleDateString","weekday","FiveDayForecast","_ref","forecast","setForecast","loading","setLoading","then","finally","className","children","time","slice","map","idx","weatherIcon","weathercode","formattedDate","minTemp","Math","round","temperature_2m_min","maxTemp","temperature_2m_max","style","left","width"],"sources":["C:/Users/IDAN/Weather-App/weather-app/src/components/FiveDayForecast.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { fetchWeatherWithCache } from \"../utils/weatherCache\";\r\nimport \"./FiveDayForecast.css\";\r\n\r\nasync function get5DayForecast(lat, lon) {\r\n  return fetchWeatherWithCache(`forecast_${lat}_${lon}`, async () => {\r\n    const res = await fetch(\r\n      `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&daily=temperature_2m_max,temperature_2m_min,weathercode&timezone=auto`\r\n    );\r\n    const data = await res.json();\r\n    return data.daily;\r\n  });\r\n}\r\n\r\n// Function to get weather icon based on weather code\r\nconst getWeatherIcon = (weatherCode) => {\r\n  if (weatherCode >= 0 && weatherCode <= 3) return \"☀️\"; // Clear sky\r\n  if (weatherCode >= 45 && weatherCode <= 48) return \"🌫️\"; // Foggy\r\n  if (weatherCode >= 51 && weatherCode <= 55) return \"🌧️\"; // Drizzle\r\n  if (weatherCode >= 56 && weatherCode <= 57) return \"🌨️\"; // Freezing drizzle\r\n  if (weatherCode >= 61 && weatherCode <= 65) return \"🌧️\"; // Rain\r\n  if (weatherCode >= 66 && weatherCode <= 67) return \"🌨️\"; // Freezing rain\r\n  if (weatherCode >= 71 && weatherCode <= 75) return \"❄️\"; // Snow\r\n  if (weatherCode >= 77 && weatherCode <= 77) return \"🌨️\"; // Snow grains\r\n  if (weatherCode >= 80 && weatherCode <= 82) return \"🌧️\"; // Rain showers\r\n  if (weatherCode >= 85 && weatherCode <= 86) return \"🌨️\"; // Snow showers\r\n  if (weatherCode >= 95 && weatherCode <= 95) return \"⛈️\"; // Thunderstorm\r\n  if (weatherCode >= 96 && weatherCode <= 99) return \"⛈️\"; // Thunderstorm with hail\r\n  return \"🌤️\"; // Default\r\n};\r\n\r\n// Function to format date\r\nconst formatDate = (dateString) => {\r\n  const date = new Date(dateString);\r\n  const today = new Date();\r\n  const tomorrow = new Date(today);\r\n  tomorrow.setDate(tomorrow.getDate() + 1);\r\n\r\n  if (date.toDateString() === today.toDateString()) {\r\n    return \"Today\";\r\n  } else if (date.toDateString() === tomorrow.toDateString()) {\r\n    return \"Tomorrow\";\r\n  } else {\r\n    return date.toLocaleDateString(\"en-US\", { weekday: \"short\" });\r\n  }\r\n};\r\n\r\nexport default function FiveDayForecast({ lat, lon }) {\r\n  const [forecast, setForecast] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (lat && lon) {\r\n      setLoading(true);\r\n      get5DayForecast(lat, lon)\r\n        .then(setForecast)\r\n        .finally(() => setLoading(false));\r\n    }\r\n  }, [lat, lon]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"forecast-container\">\r\n        <div className=\"forecast-header\">\r\n          <h3 className=\"forecast-title\">5-Day Forecast</h3>\r\n          <div className=\"forecast-subtitle\">Loading forecast data...</div>\r\n        </div>\r\n        <div className=\"forecast-loading\">\r\n          <div className=\"loading-spinner\"></div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!forecast) {\r\n    return (\r\n      <div className=\"forecast-container\">\r\n        <div className=\"forecast-header\">\r\n          <h3 className=\"forecast-title\">5-Day Forecast</h3>\r\n          <div className=\"forecast-subtitle\">Unable to load forecast</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"forecast-container\">\r\n      <div className=\"forecast-header\">\r\n        <h3 className=\"forecast-title\">5-Day Forecast</h3>\r\n        <div className=\"forecast-subtitle\">Extended weather outlook</div>\r\n      </div>\r\n\r\n      <div className=\"forecast-grid\">\r\n        {forecast.time.slice(0, 5).map((date, idx) => {\r\n          const weatherIcon = getWeatherIcon(forecast.weathercode[idx]);\r\n          const formattedDate = formatDate(date);\r\n          const minTemp = Math.round(forecast.temperature_2m_min[idx]);\r\n          const maxTemp = Math.round(forecast.temperature_2m_max[idx]);\r\n\r\n          return (\r\n            <div className=\"forecast-day-card\" key={date}>\r\n              <div className=\"forecast-day-header\">\r\n                <div className=\"forecast-day-name\">{formattedDate}</div>\r\n                <div className=\"forecast-day-icon\">{weatherIcon}</div>\r\n              </div>\r\n\r\n              <div className=\"forecast-day-temps\">\r\n                <div className=\"temp-range\">\r\n                  <span className=\"temp-max\">{maxTemp}°</span>\r\n                  <span className=\"temp-separator\">/</span>\r\n                  <span className=\"temp-min\">{minTemp}°</span>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"forecast-day-details\">\r\n                <div className=\"temp-bar\">\r\n                  <div\r\n                    className=\"temp-fill\"\r\n                    style={{\r\n                      left: `${((minTemp + 20) / 60) * 100}%`,\r\n                      width: `${((maxTemp - minTemp) / 60) * 100}%`,\r\n                    }}\r\n                  ></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}